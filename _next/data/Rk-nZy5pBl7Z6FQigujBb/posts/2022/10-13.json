{"pageProps":{"post":{"title":"#5 - 2022.10.13","year":"2022","slug":"10-13","content":"<h2><a href=\"https://github.blog/changelog/2022-09-01-github-actions-larger-runners-are-now-in-public-beta/\">GitHub Actions でランナーのリソースを増強できる Larger runners がパブリックベータになりました</a></h2>\n<p>共有担当: <a href=\"https://twitter.com/miyajan\">@miyajan</a></p>\n<ul>\n<li>これまで GitHub が提供する Linux と Windows のランナーは CPU 2 コア、メモリ 7GB でした</li>\n<li>Larger runners では CPU が最大 64 コア、メモリが最大 256 GB までリソースを増強できます</li>\n<li>enterprise もしくは organization レベルでランナーグループを作成し、Larger runners の利用をコントロールできます\n<ul>\n<li>どの organization、どのリポジトリが利用可能かアクセスコントロールが可能です</li>\n</ul>\n</li>\n<li>料金\n<ul>\n<li><a href=\"https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions#per-minute-rates\">使用するリソースの量に応じて利用料金も増えます</a></li>\n<li>通常のランナーはパブリックリポジトリは無料になりますが、Larger runners はパブリックリポジトリでも無料になりません\n<ul>\n<li>パブリックリポジトリで Larger runners を利用すると、外部からのコミットによって想定外の利用料金になる可能性があるので気をつけましょう</li>\n</ul>\n</li>\n<li>通常のランナーはライセンスの種類に応じて無料枠が存在しますが、Larger runners は無料枠の対象になりません</li>\n</ul>\n</li>\n<li>パブリックベータ\n<ul>\n<li>利用するには<a href=\"https://github.com/features/github-hosted-runners/signup\">サインアップページ</a>から申し込み、waitlist に登録する必要があります</li>\n<li>GitHub Team か GitHub Enterprise Cloud プランの organization のみ利用可能です</li>\n</ul>\n</li>\n<li>GitHub Enterprise Cloud の場合、ランナーに固定の IP レンジのアドレスが割り当てられるようにする機能も追加されてます</li>\n<li>これまで大量のリソースが必要なジョブを実行するには、ジョブを分割して並列実行するか、AWS/GCP など外部リソースに処理を持っていくかするしかなかったですが、GitHub Actions の単独のランナーで実現できる選択肢が増え、嬉しい場面がありそうです</li>\n</ul>\n<h2><a href=\"https://github.blog/changelog/2022-09-08-github-actions-use-github_token-with-workflow_dispatch-and-repository_dispatch/\">GitHub Actions の GITHUB_TOKEN で workflow_dispatch と repository_dispatch イベントのワークフローを呼び出せるようになりました</a></h2>\n<p>共有担当: <a href=\"https://twitter.com/miyajan\">@miyajan</a></p>\n<ul>\n<li>GitHub Actions のワークフロー実行時に自動で <code>GITHUB_TOKEN</code> というシークレットが割り当てられ、ワークフロー内で GitHub へアクセスするときに利用できます\n<ul>\n<li>例えば、<a href=\"https://github.com/actions/checkout\">actions/checkout</a> アクションはデフォルトでこの <code>GITHUB_TOKEN</code> を使って認証してリポジトリをチェックアウトします</li>\n</ul>\n</li>\n<li>これまでは、<code>GITHUB_TOKEN</code> で GitHub のイベントを発生させる操作を行ったときに、別ワークフローをトリガーしないようになっていました\n<ul>\n<li>例えば、<code>GITHUB_TOKEN</code> を使ってリポジトリにコミットを push しても、GitHub Actions の <code>on: push</code> イベントのワークフローは実行されません</li>\n<li>これは、ユーザーが誤ってワークフローの無限ループを引き起こすのを防ぐ目的の制限です</li>\n<li>なので、ワークフローから別のワークフローをトリガーしたい場合は、パーソナルアクセストークンなど別の認証方法でイベントを発生させる必要がありました</li>\n</ul>\n</li>\n<li>今回の変更で、<code>GITHUB_TOKEN</code> を使って <code>workflow_dispatch</code> イベントや <code>repository_dispatch</code> イベントを引き起こしたときは、対応する GitHub Actions のワークフローがトリガーされるように緩和されました\n<ul>\n<li>これらのイベントは明示的にワークフローを呼び出すためのイベントなので、誤って無限ループを引き起こすリスクは低いと判断されたようです</li>\n</ul>\n</li>\n<li>今回の修正により、パーソナルアクセストークンなど別の認証方法を用意せずに実現できるシナリオが増えそうです\n<ul>\n<li>例えば、ワークフローからコミットを作成して、CI ワークフローを <code>workflow_dispatch</code> イベントや <code>repository_dispatch</code> イベントで呼び出すようにするとか</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1>We are hiring</h1>\n<a href=\"https://note.com/cybozu_dev/n/n1c1b44bf72f6\">\n<img src=\"https://user-images.githubusercontent.com/471182/156986297-b189ef3d-98d3-4490-af5c-007a4ab47e5e.png\" alt=\"サイボウズの開発者の生産性を上げる「生産性向上チーム」とは！？\" width=\"600\">\n</a>\n"}},"__N_SSG":true}