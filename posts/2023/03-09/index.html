<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/productivity-news/favicon/favicon.ico"/><link rel="icon" href="/productivity-news/favicon/icon.svg" type="image/svg+xml"/><link rel="apple-touch-icon" href="/productivity-news/favicon/apple-touch-icon.png"/><link rel="manifest" href="/productivity-news/favicon/site.webmanifest"/><meta name="theme-color" content="#000"/><meta property="og:image" content="https://cybozu.github.io/productivity-news/og-image.png"/><meta name="twitter:image" content="https://cybozu.github.io/productivity-news/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><title>#7 - 2023.03.09 | Cybozu Productivity News</title><meta name="og:title" content="#7 - 2023.03.09 | Cybozu Productivity News"/><meta name="next-head-count" content="12"/><link rel="preload" href="/productivity-news/_next/static/css/e9b3e6a132e6efce.css" as="style"/><link rel="stylesheet" href="/productivity-news/_next/static/css/e9b3e6a132e6efce.css" data-n-g=""/><link rel="preload" href="/productivity-news/_next/static/css/236a9c0f78af5b56.css" as="style"/><link rel="stylesheet" href="/productivity-news/_next/static/css/236a9c0f78af5b56.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/productivity-news/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/productivity-news/_next/static/chunks/webpack-473f7a533704d3c7.js" defer=""></script><script src="/productivity-news/_next/static/chunks/framework-6fb3980f016be2d7.js" defer=""></script><script src="/productivity-news/_next/static/chunks/main-4f8d1876aae14607.js" defer=""></script><script src="/productivity-news/_next/static/chunks/pages/_app-1e17a6754614af77.js" defer=""></script><script src="/productivity-news/_next/static/chunks/72-915495b5abb2d97e.js" defer=""></script><script src="/productivity-news/_next/static/chunks/pages/posts/%5Byear%5D/%5Bslug%5D-6b5584d8c88e1283.js" defer=""></script><script src="/productivity-news/_next/static/5BaYaYWKCFtHDHjDNnlI7/_buildManifest.js" defer=""></script><script src="/productivity-news/_next/static/5BaYaYWKCFtHDHjDNnlI7/_ssgManifest.js" defer=""></script><script src="/productivity-news/_next/static/5BaYaYWKCFtHDHjDNnlI7/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/productivity-news/">Cybozu Productivity News</a></h2><article class="mb-32"><h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">#7 - 2023.03.09</h1><div class="max-w-full mx-auto"><div class="markdown-styles_markdown__h_8de"><h2><a href="https://github.blog/changelog/2023-02-08-pull-request-merge-queue-public-beta/">Pull request merge queue (public beta) | GitHub Changelog</a></h2>
<p>共有担当: <a href="https://github.com/korosuke613">@korosuke613</a></p>
<ul>
<li>GitHub において、pull request merge queue がパブリックベータになりました
<ul>
<li><a href="https://zenn.dev/korosuke613/articles/productivity-weekly-20211108#pull-request-merge-queue-limited-beta-%7C-github-changelog">一昨年のプライベートベータ</a>から約一年かかりましたね</li>
</ul>
</li>
<li>マージキューはプルリクエストが頻繁に飛び交うリポジトリにおいて特に有効です。プルリクエストをすぐにマージするのではなく、キューに溜め込み、溜まったプルリクエストをまとめたブランチを作り、CI にかけマージするという手法になります
<ul>
<li>マージキューがなぜ嬉しいかについては<a href="https://zenn.dev/korosuke613/articles/productivity-weekly-20211108#pull-request-merge-queue-limited-beta-%7C-github-changelog">過去の記事</a>を参照ください</li>
</ul>
</li>
<li>現時点では GHEC、Organization のみ利用可能であるため、個人のリポジトリでの利用はできません
<ul>
<li>将来的に個人でも使えるのかは分かりませんが、個人で使うメリットはあまりなさそうです（renovate などのプルリクエストをまとめてマージするのに便利かも？）</li>
</ul>
</li>
<li>実際に会社のリポジトリで試してみました
<ul>
<li><a href="https://zenn.dev/link/comments/4e39f8e985babb">GitHubのPull request merge queueを試す</a></li>
</ul>
</li>
<li>次のリンクの人の方がもっとわかりやすくまとめてくれています
<ul>
<li><a href="https://medium.com/@ronnnnn_jp/github-%E3%81%AE-merge-queue-%E3%82%92%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%81%A6%E5%88%86%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8-5c5b94cf477b">GitHub の merge queue を試してみて分かったこと | by Seiya Kokushi | Feb, 2023 | Medium</a></li>
<li>特に、merge queue に詰められた後のコミット順の項目は非常に分かりやすく、参考になります</li>
</ul>
</li>
<li>感想としては、結構複雑な仕組みなので、仕様をきちんと知らないと想定通りの利用が難しいという印象です。しかし、使いこなせればとても強力だと思います。皆さんも大規模リポジトリで有効活用してみてください</li>
</ul>
<h2><a href="https://brew.sh/2023/02/16/homebrew-4.0.0/">Homebrew 4.0.0 Release</a></h2>
<p>共有担当: <a href="https://twitter.com/ganta0087">@ganta0087</a></p>
<ul>
<li>Homebrew 4.0.0がリリースされました🎉</li>
<li>インストールパッケージの情報源となるhomebrew/coreとhomebrew/caskをTapとしてではなく、formulae.brew.shからJSONファイルを取得する方式に変更されました。
<ul>
<li>巨大化したこれらのリポジトリのTapによるGitクローンは非常に低速だったため、JSONダウンロード方式への移行で高速化されました。</li>
<li><code>brew update</code>の自動実行の頻度が5分から24時間に変更されました。</li>
<li>FormulaeやTapsの開発を行っていなければhomebrew/coreとhomebrew/caskのTapを解除できます。手元の環境ではディスク使用量が約1GB削減されました。</li>
</ul>
</li>
<li>HomebrewのアナリティクスがGoogle AnalyticsからセルフホストされたInfluxDBへ変更される予定です。
<ul>
<li>今回のリリースでアナリティクスの送信先として、EUに置かれたセルフホストされたInfluxDBインスタンスが追加されました。</li>
<li>Google Analyticsやアメリカにデータが送信されることを嫌ってアナリティクス機能を無効にしていたユーザーに有効にして貰うことを期待しているようです。</li>
<li>現在は移行期間で4.0.0のリリースから90日後にGoogle Analyticsへの送信は停止され、データもすべて破棄されるとのことです。</li>
</ul>
</li>
<li><a href="https://www.publickey1.jp/blog/23/homebrew_40git_clonejson.html">パッケージマネージャ「Homebrew 4.0」正式リリース、より高速に。Git cloneからJSONによるパッケージ管理へ切り替え － Publickey</a></li>
<li><a href="https://twitter.com/mikemcquaid/status/1626140850999664641">作者のMike McQuaid氏のツイート</a></li>
</ul>
<h2><a href="https://github.blog/changelog/2023-02-02-github-actions-updating-the-default-github_token-permissions-to-read-only/">GitHub Actions – Updating the default GITHUB_TOKEN permissions to read-only</a></h2>
<p>共有担当: <a href="https://twitter.com/r4mimu">@r4mimu</a></p>
<ul>
<li>これまで GitHub Actionsは、リポジトリ上でActionsを有効にすると、デフォルトで読み取り/書き込みの両方のパーミッション(<code>write-all</code>)を持つGITHUB_TOKENを取得していました
<ul>
<li>そのため <code>actions/checkout@v3</code> のような <code>read-only</code> でよいアクションに過剰に権限が付与されていることになります</li>
</ul>
</li>
<li>しかし、デフォルトで <code>write-all</code> というのは権限が強すぎるため、<code>read-only</code> 権限に変更されました(2023.02.02)</li>
<li>この変更は既存の enterprises, organizations, repositories の設定には影響を与えません</li>
<li>今後のデフォルト設定は Enterprise -> Organization -> Repository の順に権限が継承されます</li>
<li>デフォルト権限が安全側に倒されるのは助かりますね</li>
</ul>
<h2><a href="https://efcl.info/2023/02/01/update-github-actions-permissions-v2/">update-github-actions-permissions v2をリリース: 500種類のGitHub Actionsのpermissionsに対応</a></h2>
<p>共有担当: <a href="https://twitter.com/r4mimu">@r4mimu</a></p>
<ul>
<li>update-github-actions-permissionsは <code>.github/workflow/*.yml</code> のWorkflowファイルに対して、利用してるActionから最小限 permissionsを自動的に設定するツールです</li>
<li>先の記事でも共有したとおり、GitHub Actions のワークフローに対するのデフォルト権限は <code>write-all</code> でした</li>
<li>このツールはコマンドで、Workflowファイル内の過剰な権限が付与されてい るAction に <code>permissions</code> を設定します</li>
<li>update-github-actions-permissions v1では、50種類ほどのGitHub Actionsのpermissionsをサポートをしていましたが、v2では500種類以上のGitHub Actionsのpermissionsをサポートされています</li>
<li>update-github-actions-permissionsはシンプルにpermissionsを自動で設定するだけのツールであり、<code>Read repository contents permission</code>をデフォルトにするために移行するツールという位置付けだそうです</li>
</ul>
<h2><a href="https://zenn.dev/kesin11/articles/gha_releasenote_ghes">GitHub Actions関連機能とGHESリリースノートの対応表</a></h2>
<p>共有担当: <a href="https://twitter.com/r4mimu">@r4mimu</a></p>
<ul>
<li>GitHub.com における GitHub Actions の新機能リリースが GitHub Enterprise Server(GHES) のどのバージョンで利用できるかをまとめた対応表記事です</li>
<li>この記事では Changelog ごとにリリース日、ドキュメントへのリンク、対応した GHES のバージョンを表にまとめています
<ul>
<li>時系列で降順になっているのでとても見やすいです</li>
</ul>
</li>
<li>サイボウズ社内でも GHES は利用しており、GHES のActions で機能が対応しているかを確認したい際に重宝しています</li>
<li>有志の手動更新なので気づいた点や反映されていない更新があったらコメントしていきたいですね</li>
</ul>
<h2><a href="https://dev.classmethod.jp/articles/terraform-cloud-dynamic-provider-credentials/">[アップデート]Terraform CloudがValutやAWS,Azure,Google Cloudに対してOIDCで動的なクレデンシャル生成に対応 | DevelopersIO</a></h2>
<p>共有担当: <a href="https://twitter.com/defaultcf">@defaultcf</a></p>
<ul>
<li><a href="https://www.hashicorp.com/blog/terraform-cloud-adds-dynamic-provider-credentials-vault-official-cloud-providers">Terraform Cloud Adds Dynamic Provider Credentials for Vault and Official Cloud Providers</a></li>
<li>今までは Terraform Cloud で AWS の認証を行うには、IAM アクセスキーを使う必要があり、AWS_ACCESS_KEY_ID と AWS_SECRET_ACCESS_KEY を環境変数に設定するしかありませんでした</li>
<li>今回の Terraform Cloud のアップデートによって、OIDC を使って AWS の認証ができるようになりました
<ul>
<li>退職に伴うキーのローテーションなどが必要なくなります</li>
</ul>
</li>
<li>試してみました
<ul>
<li>OIDC Provider と IAM Role を作成
<ul>
<li>IAM Role には、今まで IAM ユーザーに付与していた各種権限を同じように付与</li>
</ul>
</li>
<li>Terraform Cloud で次の設定をします
<ul>
<li>TFC_AWS_PROVIDER_AUTH を true に設定</li>
<li>TFC_AWS_RUN_ROLE_ARN を Terraform で作成したロールの ARN に設定</li>
</ul>
</li>
<li>最後に AWS の IAM アクセスキーを環境変数から削除</li>
</ul>
</li>
<li>便利なので、Terraform Cloud を使っている方は OIDC に移行するとより安全で良いかと思います</li>
</ul>
<h2><a href="https://github.blog/changelog/2023-01-31-audit-log-streaming-to-aws-s3-integration-with-aws-cloudtrail-lake/">Audit log streaming to AWS S3 integration with AWS CloudTrail Lake | GitHub Changelog</a></h2>
<p>共有担当: <a href="https://twitter.com/defaultcf">@defaultcf</a></p>
<ul>
<li>GitHub の audit log を AWS に出力する機能は2022年1月に GA となっています</li>
<li>今回は AWS 側のアップデートにより、さらに CloudTrail Lake に取り込めるようになりました
<ul>
<li><a href="https://aws.amazon.com/jp/blogs/news/new-aws-cloudtrail-lake-supports-ingesting-activity-events-from-non-aws-sources/">新規 — AWS CloudTrail Lake が AWS 以外のソースからのアクティビティイベントの取り込みをサポート | Amazon Web Services ブログ</a></li>
<li>CloudTrail Lake に外部のサービスのイベントを取り込めるようになりました</li>
</ul>
</li>
<li>また AWS がこの統合機能を使ったサンプルを提供しています
<ul>
<li><a href="https://github.com/aws-samples/aws-cloudtrail-lake-github-audit-log">aws-samples/aws-cloudtrail-lake-github-audit-log: A reference architecture to integrate GitHub Audit Log to AWS CloudTrail Lake</a></li>
<li>S3 にログがアップロードされる度に、そのログデータを CloudTrail Audit Event 形式に変換して CloudTrail に送信します</li>
</ul>
</li>
<li>Athena などで頑張ることなく、ログ解析の基盤を作ることができるので便利そうです</li>
</ul>
<h2><a href="https://dev.classmethod.jp/articles/vpc-resource-map/">VPC内のサブネットやルートテーブルなどのリソースを可視化するリソースマップが追加されました | DevelopersIO</a></h2>
<p>共有担当: <a href="https://twitter.com/defaultcf">@defaultcf</a></p>
<ul>
<li>AWS マネージドコンソール上で、VPC 内のサブネットやルートテーブル、NAT Gateway などの関係性を図で確認できるようになりました
<ul>
<li><a href="https://aws.amazon.com/jp/about-aws/whats-new/2023/02/amazon-vpc-resource-map-aws-management-console/">Amazon VPC、AWS マネジメントコンソールでのリソースマップの一般提供を発表</a></li>
</ul>
</li>
<li>VPC 作成時に作成するリソースの関係が図で確認できる機能は 2022年3月に GA となっていますが、今回既存のリソースも図で確認できるようになりました</li>
<li>直感的に関係を把握できるので、誤った接続がされていないかをサクッと調べるのに便利です</li>
</ul>
<h2><a href="https://efcl.info/2023/01/31/remove-secret-from-local/">1Passwordを使って、ローカルにファイル(~/.configや.env)として置かれてる生のパスワードなどを削除した | Web Scratch</a></h2>
<p>共有担当: <a href="https://twitter.com/miyajan">@miyajan</a></p>
<ul>
<li>1Password を使ってローカルの生パスワードなどを削除する方法として、以下のような内容が紹介されています
<ul>
<li>SSH の秘密鍵を 1Password に移行する方法</li>
<li>1Password Shell Plugins で <code>gh</code> コマンドや <code>aws</code> コマンドのクレデンシャルを 1Password に移行する方法</li>
<li>1Password CLI で <code>.env</code> や dotfile に入っているクレデンシャルを 1Password に移行する方法</li>
</ul>
</li>
<li>1Password CLI をうまく使えばローカルに生でクレデンシャルを保存することはほぼなくせそうでいいですね</li>
<li>記事のまとめにも書かれている通り、クレデンシャルを読み取るプロセスが頻繁に実行される場合に少しわずらわしいのと、セッションみたいな固定じゃないクレデンシャルの扱いをどうしようかなというのは引き続きありますね</li>
</ul>
<hr>
<h1>We are hiring</h1>
<a href="https://note.com/cybozu_dev/n/n1c1b44bf72f6">
<img src="https://user-images.githubusercontent.com/471182/156986297-b189ef3d-98d3-4490-af5c-007a4ab47e5e.png" alt="サイボウズの開発者の生産性を上げる「生産性向上チーム」とは！？" width="600">
</a>
</div></div></article></div></main></div><footer class="bg-neutral-50 border-t border-neutral-200"><div class="container mx-auto px-5"><div class="py-10 flex flex-col lg:flex-row items-center"><div class="flex flex-col lg:flex-row justify-center items-center lg:pl-4 lg:w-1/2"><a href="https://github.com/cybozu/productivity-news" class="mx-3 font-bold hover:underline">View on GitHub</a></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"#7 - 2023.03.09","year":"2023","slug":"03-09","content":"\u003ch2\u003e\u003ca href=\"https://github.blog/changelog/2023-02-08-pull-request-merge-queue-public-beta/\"\u003ePull request merge queue (public beta) | GitHub Changelog\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://github.com/korosuke613\"\u003e@korosuke613\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub において、pull request merge queue がパブリックベータになりました\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://zenn.dev/korosuke613/articles/productivity-weekly-20211108#pull-request-merge-queue-limited-beta-%7C-github-changelog\"\u003e一昨年のプライベートベータ\u003c/a\u003eから約一年かかりましたね\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eマージキューはプルリクエストが頻繁に飛び交うリポジトリにおいて特に有効です。プルリクエストをすぐにマージするのではなく、キューに溜め込み、溜まったプルリクエストをまとめたブランチを作り、CI にかけマージするという手法になります\n\u003cul\u003e\n\u003cli\u003eマージキューがなぜ嬉しいかについては\u003ca href=\"https://zenn.dev/korosuke613/articles/productivity-weekly-20211108#pull-request-merge-queue-limited-beta-%7C-github-changelog\"\u003e過去の記事\u003c/a\u003eを参照ください\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e現時点では GHEC、Organization のみ利用可能であるため、個人のリポジトリでの利用はできません\n\u003cul\u003e\n\u003cli\u003e将来的に個人でも使えるのかは分かりませんが、個人で使うメリットはあまりなさそうです（renovate などのプルリクエストをまとめてマージするのに便利かも？）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e実際に会社のリポジトリで試してみました\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://zenn.dev/link/comments/4e39f8e985babb\"\u003eGitHubのPull request merge queueを試す\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e次のリンクの人の方がもっとわかりやすくまとめてくれています\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/@ronnnnn_jp/github-%E3%81%AE-merge-queue-%E3%82%92%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%81%A6%E5%88%86%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8-5c5b94cf477b\"\u003eGitHub の merge queue を試してみて分かったこと | by Seiya Kokushi | Feb, 2023 | Medium\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e特に、merge queue に詰められた後のコミット順の項目は非常に分かりやすく、参考になります\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e感想としては、結構複雑な仕組みなので、仕様をきちんと知らないと想定通りの利用が難しいという印象です。しかし、使いこなせればとても強力だと思います。皆さんも大規模リポジトリで有効活用してみてください\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003ca href=\"https://brew.sh/2023/02/16/homebrew-4.0.0/\"\u003eHomebrew 4.0.0 Release\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://twitter.com/ganta0087\"\u003e@ganta0087\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHomebrew 4.0.0がリリースされました🎉\u003c/li\u003e\n\u003cli\u003eインストールパッケージの情報源となるhomebrew/coreとhomebrew/caskをTapとしてではなく、formulae.brew.shからJSONファイルを取得する方式に変更されました。\n\u003cul\u003e\n\u003cli\u003e巨大化したこれらのリポジトリのTapによるGitクローンは非常に低速だったため、JSONダウンロード方式への移行で高速化されました。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebrew update\u003c/code\u003eの自動実行の頻度が5分から24時間に変更されました。\u003c/li\u003e\n\u003cli\u003eFormulaeやTapsの開発を行っていなければhomebrew/coreとhomebrew/caskのTapを解除できます。手元の環境ではディスク使用量が約1GB削減されました。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eHomebrewのアナリティクスがGoogle AnalyticsからセルフホストされたInfluxDBへ変更される予定です。\n\u003cul\u003e\n\u003cli\u003e今回のリリースでアナリティクスの送信先として、EUに置かれたセルフホストされたInfluxDBインスタンスが追加されました。\u003c/li\u003e\n\u003cli\u003eGoogle Analyticsやアメリカにデータが送信されることを嫌ってアナリティクス機能を無効にしていたユーザーに有効にして貰うことを期待しているようです。\u003c/li\u003e\n\u003cli\u003e現在は移行期間で4.0.0のリリースから90日後にGoogle Analyticsへの送信は停止され、データもすべて破棄されるとのことです。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.publickey1.jp/blog/23/homebrew_40git_clonejson.html\"\u003eパッケージマネージャ「Homebrew 4.0」正式リリース、より高速に。Git cloneからJSONによるパッケージ管理へ切り替え － Publickey\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/mikemcquaid/status/1626140850999664641\"\u003e作者のMike McQuaid氏のツイート\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003ca href=\"https://github.blog/changelog/2023-02-02-github-actions-updating-the-default-github_token-permissions-to-read-only/\"\u003eGitHub Actions – Updating the default GITHUB_TOKEN permissions to read-only\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://twitter.com/r4mimu\"\u003e@r4mimu\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eこれまで GitHub Actionsは、リポジトリ上でActionsを有効にすると、デフォルトで読み取り/書き込みの両方のパーミッション(\u003ccode\u003ewrite-all\u003c/code\u003e)を持つGITHUB_TOKENを取得していました\n\u003cul\u003e\n\u003cli\u003eそのため \u003ccode\u003eactions/checkout@v3\u003c/code\u003e のような \u003ccode\u003eread-only\u003c/code\u003e でよいアクションに過剰に権限が付与されていることになります\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eしかし、デフォルトで \u003ccode\u003ewrite-all\u003c/code\u003e というのは権限が強すぎるため、\u003ccode\u003eread-only\u003c/code\u003e 権限に変更されました(2023.02.02)\u003c/li\u003e\n\u003cli\u003eこの変更は既存の enterprises, organizations, repositories の設定には影響を与えません\u003c/li\u003e\n\u003cli\u003e今後のデフォルト設定は Enterprise -\u003e Organization -\u003e Repository の順に権限が継承されます\u003c/li\u003e\n\u003cli\u003eデフォルト権限が安全側に倒されるのは助かりますね\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003ca href=\"https://efcl.info/2023/02/01/update-github-actions-permissions-v2/\"\u003eupdate-github-actions-permissions v2をリリース: 500種類のGitHub Actionsのpermissionsに対応\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://twitter.com/r4mimu\"\u003e@r4mimu\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eupdate-github-actions-permissionsは \u003ccode\u003e.github/workflow/*.yml\u003c/code\u003e のWorkflowファイルに対して、利用してるActionから最小限 permissionsを自動的に設定するツールです\u003c/li\u003e\n\u003cli\u003e先の記事でも共有したとおり、GitHub Actions のワークフローに対するのデフォルト権限は \u003ccode\u003ewrite-all\u003c/code\u003e でした\u003c/li\u003e\n\u003cli\u003eこのツールはコマンドで、Workflowファイル内の過剰な権限が付与されてい るAction に \u003ccode\u003epermissions\u003c/code\u003e を設定します\u003c/li\u003e\n\u003cli\u003eupdate-github-actions-permissions v1では、50種類ほどのGitHub Actionsのpermissionsをサポートをしていましたが、v2では500種類以上のGitHub Actionsのpermissionsをサポートされています\u003c/li\u003e\n\u003cli\u003eupdate-github-actions-permissionsはシンプルにpermissionsを自動で設定するだけのツールであり、\u003ccode\u003eRead repository contents permission\u003c/code\u003eをデフォルトにするために移行するツールという位置付けだそうです\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003ca href=\"https://zenn.dev/kesin11/articles/gha_releasenote_ghes\"\u003eGitHub Actions関連機能とGHESリリースノートの対応表\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://twitter.com/r4mimu\"\u003e@r4mimu\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub.com における GitHub Actions の新機能リリースが GitHub Enterprise Server(GHES) のどのバージョンで利用できるかをまとめた対応表記事です\u003c/li\u003e\n\u003cli\u003eこの記事では Changelog ごとにリリース日、ドキュメントへのリンク、対応した GHES のバージョンを表にまとめています\n\u003cul\u003e\n\u003cli\u003e時系列で降順になっているのでとても見やすいです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eサイボウズ社内でも GHES は利用しており、GHES のActions で機能が対応しているかを確認したい際に重宝しています\u003c/li\u003e\n\u003cli\u003e有志の手動更新なので気づいた点や反映されていない更新があったらコメントしていきたいですね\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003ca href=\"https://dev.classmethod.jp/articles/terraform-cloud-dynamic-provider-credentials/\"\u003e[アップデート]Terraform CloudがValutやAWS,Azure,Google Cloudに対してOIDCで動的なクレデンシャル生成に対応 | DevelopersIO\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://twitter.com/defaultcf\"\u003e@defaultcf\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.hashicorp.com/blog/terraform-cloud-adds-dynamic-provider-credentials-vault-official-cloud-providers\"\u003eTerraform Cloud Adds Dynamic Provider Credentials for Vault and Official Cloud Providers\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e今までは Terraform Cloud で AWS の認証を行うには、IAM アクセスキーを使う必要があり、AWS_ACCESS_KEY_ID と AWS_SECRET_ACCESS_KEY を環境変数に設定するしかありませんでした\u003c/li\u003e\n\u003cli\u003e今回の Terraform Cloud のアップデートによって、OIDC を使って AWS の認証ができるようになりました\n\u003cul\u003e\n\u003cli\u003e退職に伴うキーのローテーションなどが必要なくなります\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e試してみました\n\u003cul\u003e\n\u003cli\u003eOIDC Provider と IAM Role を作成\n\u003cul\u003e\n\u003cli\u003eIAM Role には、今まで IAM ユーザーに付与していた各種権限を同じように付与\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTerraform Cloud で次の設定をします\n\u003cul\u003e\n\u003cli\u003eTFC_AWS_PROVIDER_AUTH を true に設定\u003c/li\u003e\n\u003cli\u003eTFC_AWS_RUN_ROLE_ARN を Terraform で作成したロールの ARN に設定\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e最後に AWS の IAM アクセスキーを環境変数から削除\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e便利なので、Terraform Cloud を使っている方は OIDC に移行するとより安全で良いかと思います\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003ca href=\"https://github.blog/changelog/2023-01-31-audit-log-streaming-to-aws-s3-integration-with-aws-cloudtrail-lake/\"\u003eAudit log streaming to AWS S3 integration with AWS CloudTrail Lake | GitHub Changelog\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://twitter.com/defaultcf\"\u003e@defaultcf\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub の audit log を AWS に出力する機能は2022年1月に GA となっています\u003c/li\u003e\n\u003cli\u003e今回は AWS 側のアップデートにより、さらに CloudTrail Lake に取り込めるようになりました\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://aws.amazon.com/jp/blogs/news/new-aws-cloudtrail-lake-supports-ingesting-activity-events-from-non-aws-sources/\"\u003e新規 — AWS CloudTrail Lake が AWS 以外のソースからのアクティビティイベントの取り込みをサポート | Amazon Web Services ブログ\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eCloudTrail Lake に外部のサービスのイベントを取り込めるようになりました\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eまた AWS がこの統合機能を使ったサンプルを提供しています\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/aws-samples/aws-cloudtrail-lake-github-audit-log\"\u003eaws-samples/aws-cloudtrail-lake-github-audit-log: A reference architecture to integrate GitHub Audit Log to AWS CloudTrail Lake\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eS3 にログがアップロードされる度に、そのログデータを CloudTrail Audit Event 形式に変換して CloudTrail に送信します\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eAthena などで頑張ることなく、ログ解析の基盤を作ることができるので便利そうです\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003ca href=\"https://dev.classmethod.jp/articles/vpc-resource-map/\"\u003eVPC内のサブネットやルートテーブルなどのリソースを可視化するリソースマップが追加されました | DevelopersIO\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://twitter.com/defaultcf\"\u003e@defaultcf\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAWS マネージドコンソール上で、VPC 内のサブネットやルートテーブル、NAT Gateway などの関係性を図で確認できるようになりました\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://aws.amazon.com/jp/about-aws/whats-new/2023/02/amazon-vpc-resource-map-aws-management-console/\"\u003eAmazon VPC、AWS マネジメントコンソールでのリソースマップの一般提供を発表\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eVPC 作成時に作成するリソースの関係が図で確認できる機能は 2022年3月に GA となっていますが、今回既存のリソースも図で確認できるようになりました\u003c/li\u003e\n\u003cli\u003e直感的に関係を把握できるので、誤った接続がされていないかをサクッと調べるのに便利です\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003ca href=\"https://efcl.info/2023/01/31/remove-secret-from-local/\"\u003e1Passwordを使って、ローカルにファイル(~/.configや.env)として置かれてる生のパスワードなどを削除した | Web Scratch\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e共有担当: \u003ca href=\"https://twitter.com/miyajan\"\u003e@miyajan\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e1Password を使ってローカルの生パスワードなどを削除する方法として、以下のような内容が紹介されています\n\u003cul\u003e\n\u003cli\u003eSSH の秘密鍵を 1Password に移行する方法\u003c/li\u003e\n\u003cli\u003e1Password Shell Plugins で \u003ccode\u003egh\u003c/code\u003e コマンドや \u003ccode\u003eaws\u003c/code\u003e コマンドのクレデンシャルを 1Password に移行する方法\u003c/li\u003e\n\u003cli\u003e1Password CLI で \u003ccode\u003e.env\u003c/code\u003e や dotfile に入っているクレデンシャルを 1Password に移行する方法\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e1Password CLI をうまく使えばローカルに生でクレデンシャルを保存することはほぼなくせそうでいいですね\u003c/li\u003e\n\u003cli\u003e記事のまとめにも書かれている通り、クレデンシャルを読み取るプロセスが頻繁に実行される場合に少しわずらわしいのと、セッションみたいな固定じゃないクレデンシャルの扱いをどうしようかなというのは引き続きありますね\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch1\u003eWe are hiring\u003c/h1\u003e\n\u003ca href=\"https://note.com/cybozu_dev/n/n1c1b44bf72f6\"\u003e\n\u003cimg src=\"https://user-images.githubusercontent.com/471182/156986297-b189ef3d-98d3-4490-af5c-007a4ab47e5e.png\" alt=\"サイボウズの開発者の生産性を上げる「生産性向上チーム」とは！？\" width=\"600\"\u003e\n\u003c/a\u003e\n"}},"__N_SSG":true},"page":"/posts/[year]/[slug]","query":{"year":"2023","slug":"03-09"},"buildId":"5BaYaYWKCFtHDHjDNnlI7","assetPrefix":"/productivity-news","runtimeConfig":{"basePath":"/productivity-news"},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>